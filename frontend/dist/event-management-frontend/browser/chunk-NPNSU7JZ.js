import{a as R,c as V,d as j}from"./chunk-IPLAP3G7.js";import{a as D,b as G,e as q,h as z}from"./chunk-6U4QZZGF.js";import"./chunk-LXGICSYG.js";import{b as F,d as g,f as P,g as y,j as E,l as I,m as L,o as O,q as B,r as N,t as T,w as A}from"./chunk-NEXUFI76.js";import{A as Y,B as Z,a as K,b as U,d as H,e as J,f as Q,g as W,h as X}from"./chunk-PZ4Z3RAM.js";import{e as v,g as w,ja as k,p as S}from"./chunk-EGCVCM76.js";import{Aa as _,Ab as C,Db as o,Eb as n,Fb as u,Lb as c,Xb as i,Yb as x,Za as r,ba as s,jb as b,ob as d,ub as a}from"./chunk-QXQWZ6TV.js";function $(e,p){e&1&&(o(0,"mat-error"),i(1," E-post kr\xE4vs "),n())}function tt(e,p){e&1&&(o(0,"mat-error"),i(1," Ange en giltig e-postadress "),n())}function et(e,p){e&1&&(o(0,"mat-error"),i(1," L\xF6senord kr\xE4vs "),n())}function ot(e,p){e&1&&u(0,"mat-spinner",10)}function nt(e,p){e&1&&i(0," Logga in ")}var Ft=(()=>{class e{fb=s(O);router=s(S);authService=s(k);snackBar=s(Y);loginForm;loading=_(!1);showPassword=_(!1);constructor(){this.loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",g.required]})}onSubmit(){if(this.loginForm.invalid)return;this.loading.set(!0);let{email:f,password:l}=this.loginForm.value;this.authService.login(f,l).subscribe({next:t=>{this.loading.set(!1),t.mustChangePassword?this.router.navigate(["/change-password"]):t.user.role==="SUPERADMIN"?this.router.navigate(["/admin/users"]):this.router.navigate(["/events"])},error:t=>{this.loading.set(!1),this.snackBar.open(t.error?.error||"Inloggningen misslyckades","St\xE4ng",{duration:5e3,panelClass:"error-snackbar"})}})}onForgotPassword(){this.snackBar.open("Kontakta administrat\xF6ren f\xF6r att \xE5terst\xE4lla ditt l\xF6senord","OK",{duration:5e3})}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=b({type:e,selectors:[["app-login"]],decls:25,vars:8,consts:[[1,"login-container"],[1,"login-card"],[1,"login-title"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","namn@exempel.se"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Ange l\xF6senord",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-flat-button","","type","submit",1,"login-button",3,"disabled"],["diameter","20"],[1,"forgot-password-link",3,"click"]],template:function(l,t){if(l&1&&(o(0,"div",0)(1,"mat-card",1)(2,"mat-card-content")(3,"h1",2),i(4,"Logga in f\xF6r att forts\xE4tta"),n(),o(5,"form",3),c("ngSubmit",function(){return t.onSubmit()}),o(6,"mat-form-field",4)(7,"mat-label"),i(8,"E-post"),n(),u(9,"input",5),d(10,$,2,0,"mat-error",6)(11,tt,2,0,"mat-error",6),n(),o(12,"mat-form-field",4)(13,"mat-label"),i(14,"L\xF6senord"),n(),u(15,"input",7),o(16,"button",8),c("click",function(){return t.showPassword.set(!t.showPassword())}),o(17,"mat-icon"),i(18),n()(),d(19,et,2,0,"mat-error",6),n(),o(20,"button",9),d(21,ot,1,0,"mat-spinner",10)(22,nt,1,0),n()(),o(23,"a",11),c("click",function(){return t.onForgotPassword()}),i(24," Gl\xF6mt l\xF6senordet "),n()()()()),l&2){let m,h,M;r(5),a("formGroup",t.loginForm),r(5),a("ngIf",(m=t.loginForm.get("email"))==null?null:m.hasError("required")),r(),a("ngIf",(h=t.loginForm.get("email"))==null?null:h.hasError("email")),r(4),a("type",t.showPassword()?"text":"password"),r(3),x(t.showPassword()?"visibility_off":"visibility"),r(),a("ngIf",(M=t.loginForm.get("password"))==null?null:M.hasError("required")),r(),a("disabled",t.loginForm.invalid||t.loading()),r(),C(t.loading()?21:22)}},dependencies:[w,v,B,E,F,P,y,I,L,A,N,T,R,z,D,G,q,j,V,H,U,K,Q,J,X,W,Z],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background-color:#416487;padding:16px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:48px 40px;border-radius:16px;box-shadow:0 8px 32px #0003}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500;color:#666;margin:0 0 32px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}[_nghost-%COMP%]     .mat-mdc-form-field-flex{height:56px!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper{background:#fafafa}[_nghost-%COMP%]     .mdc-text-field--outlined{--mdc-outlined-text-field-container-shape: 8px}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;background-color:#e0e0e0!important;color:#666!important;border-radius:8px;margin-top:8px}.login-button[_ngcontent-%COMP%]:not(:disabled):hover{background-color:#416487!important;color:#fff!important}.login-button[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5!important}.forgot-password-link[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:24px;color:#666;font-size:14px;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#416487}mat-spinner[_ngcontent-%COMP%]{display:inline-block}  .mat-mdc-progress-spinner circle{stroke:#666!important}"]})}return e})();export{Ft as LoginComponent};
